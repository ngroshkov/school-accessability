subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1678
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1293
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 41
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1566
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1397
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1373
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1352
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1881
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 279
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 948
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 63
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 854
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1332
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 90
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1071
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1953
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
write.csv(schools, "../csv/schools.csv")
write.csv(complexes, "../csv/complexes.csv")
write.csv(school2building, "../csv/school2building.csv")
max(schools$ID)
max(complexes$ID)
write.csv(schools, "../csv/schools.csv", row.names = FALSE)
write.csv(school2building, "../csv/school2building.csv", row.names = FALSE)
write.csv(complexes, "../csv/complexes.csv", row.names = FALSE)
schools <- read.csv(schools, "../csv/schools.csv")
schools <- read.csv("../csv/schools.csv")
complexes <- read.csv("../csv/complexes.csv")
school2building <- read.csv("../csv/school2building.csv")
View(school2building)
View(schools)
View(complexes)
numb <- 1953
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1101
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1278
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
id <- 1157
subset(schools, ID == id)[c(1,2,3,4,6,12)]
id <- 11155
subset(schools, ID == id)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, ID == id)$ID[1]] <- rat <- rat + 1
subset(schools, ID == id)[c(1,2,3,4,6,12)]
numb <- 63
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 854
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1332
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1071
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1953
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1101
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1458
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- 389
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1278
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- 390
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, ID == 11154)$ID[1]] <- NA
schools$RATING[schools$ID == subset(schools, ID == 11155)$ID[1]] <- 390
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1275
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1469
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 706
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1363
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 2033
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 865
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1987
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 939
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 1743
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
numb <- 718
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
schools$RATING[schools$ID == subset(schools, NUMB == numb)$ID[1]] <- rat <- rat + 1
subset(schools, NUMB == numb)[c(1,2,3,4,6,12)]
write(schools, "../csv/schools.csv", row.names = FALSE)
write.csv(schools, "../csv/schools.csv", row.names = FALSE)
write.csv(complexes, "../csv/complexes.csv", row.names = FALSE)
write.csv(school2building, "../csv/school2building.csv", row.names = FALSE)
save.image()
rm(rat)
rm(numb)
rm(id)
save.image()
s <- read.csv("../csv/schools.csv")
View(s)
write.csv(s, "../csv/s.csv", row.names = FALSE, na = "")
schools <- read.csv("../csv/schools.csv")
complexes <- read.csv("../csv/complexes.csv")
save.image()
savehistory()
rm(s)
save.image()
savehistory()
max(schools$ID)
max(complexes$ID)
schools <- read.csv("../csv/schools.csv")
View(schools)
complexes <- read.csv("../csv/complexes.csv")
complexes <- read.csv("../csv/complexes.csv")
schools <- read.csv("../csv/schools.csv")
save.image()
savehistory()
schools.from.arcmap <- read.csv("../csv/schools_from_arcmap.csv")
View(schools.from.arcmap)
complexes.from.arcmap <- read.csv("../csv/complexes_from_arcmap.csv")
View(complexes.from.arcmap)
schools.from.arcmap$NEW_OKRUG <- schools.from.arcmap$OKRUG
View(schools.from.arcmap)
schools.from.arcmap$NEW_RAYON <- schools.from.arcmap$RAYON
View(schools.from.arcmap)
schools.from.arcmap$OKRUG <- NULL
schools.from.arcmap$RAYON <- NULL
View(schools.from.arcmap)
schools.new <- merge(x = schools,y = schools.from.arcmap, by.x = "ID", by.y = "ID")
View(schools.new)
schools.new <- merge(x = schools,y = schools.from.arcmap, by.x = "ID", by.y = "ID")
schools.new$NAME.y <- NULL
schools.new$NAME <- schools.new$NAME.x
schools.new$NAME.x <- NULL
View(schools.new)
schools.new$NUMB.y <- NULL
schools.new$NUMB <- schools.new$NUMB.x
schools.new$NUMB.x <- NULL
View(schools.new)
schools.new$TYPE.y <- NULL
schools.new$TYPE <- schools.new$TYPE.x
schools.new$TYPE.x <- NULL
View(schools.new)
schools.new$CURRENT_USE.y <- NULL
schools.new$CURRENT_USE <- schools.new$CURRENT_USE.x
schools.new$CURRENT_USE.x <- NULL
schools.new$CLOSED.y <- NULL
schools.new$CLOSED <- schools.new$CLOSED.x
schools.new$CLOSED.x <- NULL
schools.new$ADDRESS.y <- NULL
schools.new$ADDRESS <- schools.new$ADDRESS.x
schools.new$ADDRESS.x <- NULL
View(schools.new)
schools.new$OKRUG <- NULL
schools.new$OKRUG <- schools.new$NEW_OKRUG
View(schools.new)
schools.new$NEW_OKRUG <- NULL
schools.new$RAYON <- NULL
schools.new$RAYON <- schools.new$NEW_RAYON
schools.new$NEW_RAYON <- NULL
View(schools.new)
schools.new$COMPLEX_ID.y <- NULL
schools.new$COMPLEX_ID <- schools.new$COMPLEX_ID.x
schools.new$COMPLEX_ID.x <- NULL
View(schools.new)
schools.new$RATING.y <- NULL
schools.new$RAYON <- schools.new$RATING.x
View(schools.new)
schools.new$RATING.x <- NULL
View(schools.new)
schools.new$OBJECTID_OLD <- schools.new$OBJECTID.x
View(schools.new)
schools.new$OBJECTID.x <- NULL
schools.new$OBJECTID <- schools.new$OBJECTID.y
schools.new$OBJECTID.y <- NULL
View(schools.new)
schools.new[c(11,10,1,2,3,4,5,6,7,8,9)]
schools.new.new <- schools.new[c(11,10,1,2,3,4,5,6,7,8,9)]
View(schools.new.new)
schools.new.new <- schools.new[c(12,11,1,2,3,4,5,6,7,8,9,10)]
View(schools.new.new)
View(schools.new)
schools.new <- merge(x = schools,y = schools.from.arcmap, by.x = "ID", by.y = "ID")
schools.new$OBJECTID_OLD <- schools.new$OBJECTID.x
schools.new$OBJECTID.x <- NULL
schools.new$OBJECTID <- schools.new$OBJECTID.y
schools.new$OBJECTID.y <- NULL
schools.new$NAME.y <- NULL
schools.new$NAME <- schools.new$NAME.x
schools.new$NAME.x <- NULL
schools.new$NUMB.y <- NULL
schools.new$NUMB <- schools.new$NUMB.x
schools.new$NUMB.x <- NULL
schools.new$TYPE.y <- NULL
schools.new$TYPE <- schools.new$TYPE.x
schools.new$TYPE.x <- NULL
schools.new$CURRENT_USE.y <- NULL
schools.new$CURRENT_USE <- schools.new$CURRENT_USE.x
schools.new$CURRENT_USE.x <- NULL
schools.new$CLOSED.y <- NULL
schools.new$CLOSED <- schools.new$CLOSED.x
schools.new$CLOSED.x <- NULL
schools.new$ADDRESS.y <- NULL
schools.new$ADDRESS <- schools.new$ADDRESS.x
schools.new$ADDRESS.x <- NULL
schools.new$OKRUG <- NULL
schools.new$OKRUG <- schools.new$NEW_OKRUG
schools.new$NEW_OKRUG <- NULL
schools.new$RAYON <- NULL
schools.new$RAYON <- schools.new$NEW_RAYON
schools.new$NEW_RAYON <- NULL
schools.new$COMPLEX_ID.y <- NULL
schools.new$COMPLEX_ID <- schools.new$COMPLEX_ID.x
schools.new$COMPLEX_ID.x <- NULL
schools.new$RATING.y <- NULL
schools.new$RATING <- schools.new$RATING.x
schools.new$RATING.x <- NULL
schools.new.new <- schools.new[c(12,11,1,2,3,4,5,6,7,8,9,10)]
View(schools.new)
View(schools.new.new)
View(schools.new)
schools.new.new <- schools.new[c(3,2,1,4,5,6,7,8,9,10,11,12)]
schools.new.new <- schools.new[c(3,2,1,4,5,6,7,8,9,10,11,12,13)]
View(schools.new.new)
schools.new <- schools.new.new
rm(schools.new.new)
View(schools.new)
schools <- schools.new
rm(schools.new)
rm(schools.from.arcmap)
save.image()
savehistory()
View(complexes)
complexes.to.add <- complexes.from.arcmap[c(1,9)]
View(complexes.to.add)
complexes.to.add <- complexes.from.arcmap[c(2,9)]
View(complexes.to.add)
complexes.new <- merge(x = complexes.to.add, y = complexes, by.x = "ID", by.y = "ID")
View(complexes.new)
complexes.new$SCHOOLS_COUNT.y <- NULL
complexes.new$SCHOOLS_COUNT <- complexes.new$SCHOOLS_COUNT.x
complexes.new$SCHOOLS_COUNT.x <- NULL
complexes.new.new <- complexes.new[c(2,1,3,4,5,6,7,8,12,9,10,11)]
View(complexes.new.new)
complexes.new.new[complexes.new.new$NUMB==555]
complexes.new.new[complexes.new.new$NUMB==555,]
complexes <- complexes.new.new
rm(complexes.new)
rm(complexes.new.new)
rm(complexes.from.arcmap)
rm(complexes.to.add)
save.image()
savehistory()
aggregate(merge(x=school2building, y=buildings[8], by.x = "HOUSE_ID", by.y = "ID")$STUDENTS, list(SCHOOL_ID = ))
m merge(x=school2building, y=buildings[8], by.x = "HOUSE_ID", by.y = "ID")$STUDENTS
m <- merge(x=school2building, y=buildings[8], by.x = "HOUSE_ID", by.y = "ID")$STUDENTS
m <- merge(x=school2building, y=buildings[8], by.x = "HOUSE_ID", by.y = "ID")
m <- merge(x=school2building, y=buildings[2, 8], by.x = "HOUSE_ID", by.y = "ID")
m <- merge(x=school2building, y=buildings[c(2, 8)], by.x = "HOUSE_ID", by.y = "ID")
agg <- aggregate(m$STUDENTS, list(SCHOOL_ID = m$SCHOOL_ID), sum)
head <- agg
rm(head)
head(agg)
View(agg)
schools.new <- merge(x = schools, y = agg, by.x = "ID", by.y = "SCHOOL_ID")
View(schools.new)
schools.new$ASSIGNMENT_AREA_STUDENTS <- schools.new$x
schools.new$x <- NULL
schools.new[schools.new$RATING == 1]
schools.new[schools.new$RATING == 1,]
subset(schools.new, schools.new$RATING == 1)
subset(schools.new, RATING == 1)
schools.new[order(RATING),]
schools.new[order(RATING)]
schools.new[order(RATING),]
schools.new[order(COMPLEX_ID),]
schools.new[order(schools.new$RATING),]
head(schools.new[order(schools.new$RATING),])
head(schools[order(schools$RATING),])
schools.new <- merge(x = schools, y = agg, by.x = "ID", by.y = "SCHOOL_ID", all.x = TRUE)
schools.new$ASSIGNMENT_AREA_STUDENTS <- schools.new$x
schools.new$x <- NULL
rapply(schools.new, f=function(x) ifelse(is.na(x), 0, x), how = "replace")
head(rapply(schools.new, f=function(x) ifelse(is.na(x), 0, x), how = "replace"))
head(rapply(schools.new$ASSIGNMENT_AREA_STUDENTS, f=function(x) ifelse(is.na(x), 0, x), how = "replace"))
schools.new$ASSIGNMENT_AREA_STUDENTS[is.na(schools.new$ASSIGNMENT_AREA_STUDENTS)]
?replace
head(lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, f=function(x) ifelse(is.na(x), 0, x), how = "replace"))
head(lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, function(x) ifelse(is.na(x), 0, x), how = "replace"))
head(lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)}, how = "replace"))
lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)}, how = "replace")
lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)})
head(lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)})
)
head(lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)}))
schools.new$ASSIGNMENT_AREA_STUDENTS_NEW <- lapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)})
class(schools.new$ASSIGNMENT_AREA_STUDENTS_NEW[1])
head(schools.new$ASSIGNMENT_AREA_STUDENTS)
head(sapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)}))
schools.new$ASSIGNMENT_AREA_STUDENTS_NEW <- sapply(schools.new$ASSIGNMENT_AREA_STUDENTS, {function(x) ifelse(is.na(x), 0, x)})
class(schools.new$ASSIGNMENT_AREA_STUDENTS_NEW[1])
class(schools.new$ASSIGNMENT_AREA_STUDENTS[1])
View(schools.new)
schools.new$ASSIGNMENT_AREA_STUDENTS <- schools.new$ASSIGNMENT_AREA_STUDENTS_NEW
schools.new$ASSIGNMENT_AREA_STUDENTS_NEW <- NULL
schools <- schools.new
rm(list(agg, m))
rm(agg, m)
rm(schools.new)
save.image()
savehistory()
complexes$STUDENTS <- complexes$STEP1 + complexes$STEP2 + complexes$STEP3
View(complexes)
?subset
subset(schools, COMPLEX_ID = 17)
subset(schools, COMPLEX_ID == 17)
school_buildings <- schools
school_blocks <- schools
rm(school_buildings)
?aggregate
View(school_blocks)
attributes(school_blocks)
schools$bames
schools$names
attributes(school_blocks)$names
agg <- aggregate(school_blocks$RATING, list(NAME = school_blocks$NAME), max)
View(agg)
schools.blocks.new <- merge(school_blocks, agg, by.x = "NAME", by.y = "NAME")
View(schools.blocks.new)
?order
schools.blocks.new[order(NAME),]
schools.blocks.new[order(schools.blocks.new$NAME),]
schools.blocks.new <- schools.blocks.new[order(schools.blocks.new$NAME),]
View(schools.blocks.new)
schools.blocks.new <- sapply(school_blocks$RATING, {function(x) ifelse(is.na(x), 0, x)})
schools.blocks.new <- school_blocks
schools.blocks.new$RATING <- sapply(school_blocks$RATING, {function(x) ifelse(is.na(x), 0, x)})
View(schools.blocks.new)
View(schools)
agg <- aggregate(schools.blocks.new$RATING, list(NAME = schools.blocks.new$NAME), max)
View(agg)
schools.blocks.new <- merge(school_blocks, agg, by.x = "NAME", by.y = "NAME")
View(schools.blocks.new)
schools.blocks.new$RATING <- schools.blocks.new$x
schools.blocks.new$x <- NULL
schools.blocks.new <- schools.blocks.new[c(3,4,2,1,5,6,7,8,9,10,11,12,13,14)]
agg <- aggregate(schools.blocks.new$NAME)
agg <- aggregate(schools.blocks.new$NAME, first)
agg <- aggregate(schools.blocks.new$NAME, mean)
agg <- aggregate(schools.blocks.new$NAME, list(ID = schools.blocks.new$ID), min)
agg <- aggregate(schools.blocks.new$ID, list(NAME = schools.blocks.new$NAME), min)
View(agg)
agg$NAME <- NULL
View(agg)
agg <- merge(agg, schools.blocks.new, by.x = "ID", by.y = "ID")
agg <- merge(agg, schools.blocks.new, by.x = "x", by.y = "ID")
View(agg)
agg$CURRENT_USE <- NULL
agg$ID <- agg$x
agg$x <- NULL
View(agg)
agg<- agg[c(1,2, 13, 3,4,5,6,7,8,9,10,11,12)]
View(agg)
school.blocks <- agg
View(school.blocks)
rm(schools.blocks.new)
rm(agg)
rm(school_blocks)
save.image()
savehistory()
school.blocks$RAT <- sapply(school.blocks$RATING {function(x) ifelse(x==0,NA, x)})
school.blocks$RAT <- sapply(school.blocks$RATING, {function(x) ifelse(x==0,NA, x)})
school.blocks$RATING <- school.blocks$RAT
school.blocks$RAT <- NULL
save.image()
savehistory()
agg <- aggregate(school.blocks$ID, list(COMPLEX_ID = school.blocks$COMPLEX_ID), count)
agg <- aggregate(school.blocks$ID, list(COMPLEX_ID = school.blocks$COMPLEX_ID), length)
View(agg)
complexes.new <- merge(complexes, agg, by.x = "ID", by.y = "COMPLEX_ID")
View(complexes.new)
complexes.new$SCHOOLS_COUNT <- complexes.new$x
complexes.new$x <- NULL
complexes <- complexes.new
rm(complexes.new)
rm(agg)
save.image()
savehistory()
write.csv(complexes, file = "../csv/complexes.csv", row.names = FALSE, na="")
schools.new <- school.blocks
school.blocks.new <- schools
schools <- schools.new
school.blocks <- school.blocks.new
rm(schools.new)
rm(school.blocks.new)
View(schools)
View(school.blocks)
write.csv(schools, file = "../csv/schools.csv", row.names = FALSE, na="")
school2building <- read.csv("../csv/school2building.csv")
write.csv(school.blocks, file = "../csv/school.blocks.csv", row.names = FALSE, na="")
complexes <- complexes[c(2,1,3,4,5,6,7,8,9,10,11,12,13)]
View(complexes)
write.csv(complexes, file = "../csv/complexes.csv", row.names = FALSE, na="")
school.blocks <- school.blocks[c(2,3,1,4,5,6,7,8,9,10,11,12,13,14)]
View(school.blocks)
write.csv(school.blocks, file = "../csv/school.blocks.csv", row.names = FALSE, na="")
save.image()
savehistory()
school.blocks$ASSIGNMENT_AREA_STUDENTS <- NULL
View(school.blocks)
school.blocks$RATING <- NULL
school.blocks$COMPLEX_ID<- NULL
View(school.blocks)
school.blocks$CLOSED<- NULL
View(school.blocks)
school.blocks$TYPE<- NULL
View(school.blocks)
subset(schools, NAME = "Государственное бюджетное образовательное учреждение города Москвы средняя общеобразовательная школа №459")
subset(schools, NAME = "Государственное бюджетное образовательное учреждение города Москвы средняя общеобразовательная школа №459",)
subset(schools, NAME == "Государственное бюджетное образовательное учреждение города Москвы средняя общеобразовательная школа №459")
subset(schools, NAME == "Государственное бюджетное образовательное учреждение города Москвы средняя общеобразовательная школа №459")$ID
subset(schools, NAME == "Государственное бюджетное образовательное учреждение города Москвы средняя общеобразовательная школа №459")$ID[1]
school.blocks$SCHOOL_ID <- sapply(school_blocks$NAME, {function(x) subset(schools, NAME == x)$ID[1]})
school.blocks$SCHOOL_ID <- sapply(school.blocks$NAME, {function(x) subset(schools, NAME == x)$ID[1]})
View(school.blocks)
school.blocks$OBJECTID <- NULL
school.blocks$OBJECTID_OLD <- NULL
View(school.blocks)
school.blocks$NEW_ID <- list(1:nrow(school.blocks))
View(school.blocks)
school.blocks$NEW_ID <- 1:nrow(school.blocks)
View(school.blocks)
school.blocks$ID <- school.blocks$NEW_ID
school.blocks$NEW_ID <- NULL
View(school.blocks)
school.blocks<- school.blocks[c(1, 8, 2,3,4,5,6,7)]
View(school.blocks)
write.csv(school.blocks, file = "../csv/school.blocks.csv", row.names = FALSE, na="")
save.image()
savehistory()
class(schools$TYPE)
subset(schools, TYPE == NULL)
subset(schools, is.na(TYPE))
subset(schools, TYPE=="")
table(schools$TYPE)
