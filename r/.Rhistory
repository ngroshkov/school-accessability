school2building.new.new <- subset(school2building.new, BUILDING_ID == 38652)
school2building.new.new <- subset(school2building.new, BUILDING_ID != 38652)
school2building.new.new <- rbind(school2building.new.new, school2building.to.change)
subset(school2building.new.new, BUILDING_ID == 38652)
school2building.new <- school2building.new.new
rm(school2building.new.new, school2building.to.replace)
buildings[buildings$ID == 9917,]
school2building[school2building$BUILDING_ID == 9917,]
school2building.new.new <- school2building[school2building$BUILDING_ID != 9917,]
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 9917,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID != 9917 & (school2building.new$BUILDING_ID == 10483 | school2building.new$BUILDING_ID == 10484),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID != 9917 & (school2building.new$BUILDING_ID == 10483),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID != 9917 & (school2building.new$SCHOOL_ID == 10483 | school2building.new$SCHOOL_ID == 10484),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID != 9917,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 9917,]
school2building.new.to.add <-  school2building.new.to.add[school2building.new.to.add$SCHOOL_ID == 10483 | school2building.new.to.add$SCHOOL_ID == 10484,]
View(school2building.new.to.add)
school2building.new.to.add$NEW_BUILDING_ID <- 12017
View(school2building.new.to.add)
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID != 9917 & school2building.new$SCHOOL_ID %in% (10810, 10850, 10851, 11206, 11207, 11464, 11465, 11467, 11468),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID = 9917 & school2building.new$SCHOOL_ID %in% (10810, 10850, 10851, 11206, 11207, 11464, 11465, 11467, 11468),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 9917 & school2building.new$SCHOOL_ID %in% (10810, 10850, 10851, 11206, 11207, 11464, 11465, 11467, 11468),]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 9917 & school2building.new$SCHOOL_ID %in% list(10810, 10850, 10851, 11206, 11207, 11464, 11465, 11467, 11468),]
View(school2building.new.to.add)
school2building.new.to.add$NEW_BUILDING_ID <- 2632
school2building.new.to.change <- school2building.new.to.add
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 9917 & school2building.new$SCHOOL_ID %in% list(10810, 10850, 10851, 11206, 11207, 11464, 11465, 11467, 11468),]
View(school2building.new.to.add)
school2building.new.to.add$NEW_BUILDING_ID <- 2633
school2building.new.to.change <- rbind(school2building.new.to.change, school2building.new.to.add)
View(school2building.new.to.change)
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
rm(school2building.new.new )
rm(school2building.to.change )
rm(school2building.new.to.add )
rm(school2building.new.to.change )
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 9988,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 9988,]
View(school2building.new.to.add)
buildings[buildings$ID == 9988,]
View(school2building.new.to.add)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10810, 10849, 10850, 10851, 11206, 11207, 11272, 11464, 11465, 11466, 11467, 11468),]
school2building.new.to.change$NEW_BUILDING_ID <- 8434
View(school2building.new.to.change)
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(11154, 11155, 11254, 11255, 11426),]
View(school2building.new.to.change)
buildings[buildings$ID == 9988,]
buildings[buildings$ID == 4443,]
buildings[buildings$NEW_ID == 4443,]
buildings[buildings$ID == 9988,]
school2building.new.to.change$NEW_BUILDING_ID <- 2836
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change$NEW_BUILDING_ID <- 7738
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
buildings[buildings$ID == 10691,]
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 10691,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 10691,]
View(school2building.new.to.add)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(11312, 11371, 11372),]
school2building.new.to.change$NEW_BUILDING_ID <- 8096
View(school2building.new.to.add)
View(school2building.new.to.change)
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10671, 10842, 11315),]
school2building.new.to.change$NEW_BUILDING_ID <- 3504
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change$NEW_BUILDING_ID <- 3505
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 10692,]
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 10692,]
buildings[buildings$ID == 10692,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 10692,]
View(school2building.new.to.add)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(11312, 11371, 11372),]
school2building.new.to.change$NEW_BUILDING_ID <- 8098
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10671, 10842, 11315),]
school2building.new.to.change$NEW_BUILDING_ID <- 18375
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change$NEW_BUILDING_ID <- 18377
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
buildings[buildings$ID == 10701,]
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 10701,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 10701,]
View(school2building.new.to.add)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10671, 10842, 11315),]
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(11312, 11371, 11372),]
school2building.new.to.change$NEW_BUILDING_ID <- 13035
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10671, 10842, 11315),]
school2building.new.to.change$NEW_BUILDING_ID <- 13382
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change$NEW_BUILDING_ID <- 13444
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
buildings[buildings$ID == 12485,]
school2building.new.new <- school2building.new[school2building.new$BUILDING_ID != 12485,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 12485,]
View(school2building.new.to.add)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10310, 10762, 11292),]
school2building.new.to.change$NEW_BUILDING_ID <- 28898
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10157, 11321, 11322, 11323, 11483),]
school2building.new.to.change$NEW_BUILDING_ID <- 4596
school2building.new.to.change <- school2building.new.to.add[school2building.new.to.add$SCHOOL_ID %in% list(10157, 11321, 11322, 11323, 11483),]
school2building.new.to.change$NEW_BUILDING_ID <- 4597
school2building.new.new <- rbind(school2building.new.new, school2building.new.to.change)
school2building.new <- school2building.new.new
buildings[buildings$ID == 1030,]
aggg <- aggregate(buildings$ID, list(ID = buildings$ID), length)
aggg <- aggregate(buildings$ID, list(ID = buildings$NEW_ID), length)
rm(aggg)
buildings.double1 <- buildings.double[buildings.double$x== 2,]
buildings.double1 -> buildings.double
rm(buildings.double1)
View(buildings.double)
rm(school2building.new.to.add)
rm(school2building.new.to.change)
rm(school2building.new.new)
buildings.from.arcmap <- read.csv("../csv/buildings_from_arcmap.csv")
View(buildings.from.arcmap)
buildings.new <- merge(buildings, buildings.from.arcmap, by = "OBJECTID")
View(buildings.new)
buildings.from.arcmap$POINT_X_NEW <- buildings.from.arcmap$POINT_X
buildings.from.arcmap$POINT_Y_NEW <- buildings.from.arcmap$POINT_Y
NULL <- buildings.from.arcmap$POINT_X
buildings.from.arcmap$POINT_X <- NULL
View(buildings.from.arcmap)
buildings.from.arcmap$POINT_Y <- NULL
View(buildings.from.arcmap)
buildings.new <- merge(buildings, buildings.from.arcmap, by = "OBJECTID")
View(buildings.new)
buildings.new$POINT_X <- buildings.new$POINT_X_NEW
buildings.new$POINT_Y <- buildings.new$POINT_Y_NEW
buildings.new$POINT_Y_NEW <- NULL
buildings.new$POINT_X_NEW <- NULL
buildings <- buildings.new
rm (buildings.new)
save.image()
buildings[buildings$ID == 1030,]
calc.distance.between.buildings.double <- function(buildings.double, buildings) {
calc.distance.between.buildings.double <- numeric();
for (bIdx in 1:nrow(buildings.double)) {
id <- buildings.double$ID[bIdx];
builds <- buildings[buildings$ID == id,]
p1 <- c(builds$POINT_X[1], builds$POINT_Y[1]);
p2 <- c(builds$POINT_Y[2], builds$POINT_Y[2])
distance <- distVincentyEllipsoid(p1, p2);
calc.distance.between.buildings.double <- c(calc.distance.between.buildings.double, distance)
print(paste(bIdx, " ", url, " ", round((100*bIdx)/nrow(buildings.double), digits = 2), "%", sep = ""));
};
calc.distance.between.buildings.double;
}
double.distances <- calc.distance.between.buildings.double(buildings.double, buildings)
library("geosphere", lib.loc="~/R/i686-pc-linux-gnu-library/3.0")
double.distances <- calc.distance.between.buildings.double(buildings.double, buildings)
calc.distance.between.buildings.double <- function(buildings.double, buildings) {
calc.distance.between.buildings.double <- numeric();
for (bIdx in 1:nrow(buildings.double)) {
id <- buildings.double$ID[bIdx];
builds <- buildings[buildings$ID == id,]
p1 <- c(builds$POINT_X[1], builds$POINT_Y[1]);
p2 <- c(builds$POINT_Y[2], builds$POINT_Y[2])
distance <- distVincentyEllipsoid(p1, p2);
calc.distance.between.buildings.double <- c(calc.distance.between.buildings.double, distance)
print(paste(bIdx, " ", round((100*bIdx)/nrow(buildings.double), digits = 2), "%", sep = ""));
};
calc.distance.between.buildings.double;
}
double.distances <- calc.distance.between.buildings.double(buildings.double, buildings)
buildings.double$DISTANCE <- double.distances
View(buildings.double)
save.image()
savehistory()
builds <- buildings[buildings$ID == 1030,]
blds <- buildings[buildings$ID == 1030,]
View(blds)
blds1 <- buildings.from.arcmap[buildings.from.arcmap$ID == 1030,]
blds1 <- buildings.from.arcmap[buildings.from.arcmap$OBJECTID %in% (4071,4072),]
blds1 <- buildings.from.arcmap[buildings.from.arcmap$OBJECTID %in% list(4071,4072),]
View(blds1)
rm(blds1)
distVincentyEllipsoid(c(blds$POINT_X[1], blds$POINT_Y[1]), c(blds$POINT_X[2], blds$POINT_Y[2]))
library("geosphere", lib.loc="~/R/i686-pc-linux-gnu-library/3.0")
distVincentyEllipsoid(c(blds$POINT_X[1], blds$POINT_Y[1]), c(blds$POINT_X[2], blds$POINT_Y[2]))
rm(blds)
calc.distance.between.buildings.double <- function(buildings.double, buildings) {
calc.distance.between.buildings.double <- numeric();
for (bIdx in 1:nrow(buildings.double)) {
id <- buildings.double$ID[bIdx];
builds <- buildings[buildings$ID == id,]
p1 <- c(builds$POINT_X[1], builds$POINT_Y[1]);
p2 <- c(builds$POINT_X[2], builds$POINT_Y[2])
distance <- distVincentyEllipsoid(p1, p2);
calc.distance.between.buildings.double <- c(calc.distance.between.buildings.double, distance)
print(paste(bIdx, " ", round((100*bIdx)/nrow(buildings.double), digits = 2), "%", sep = ""));
};
calc.distance.between.buildings.double;
}
double.distances <- calc.distance.between.buildings.double(buildings.double, buildings)
buildings.double$DISTANCE <- double.distances
blds <- buildings[buildings$ID == 9911,]
View(blds)
rm(blds)
buildings.double[order(buildings.double$DISTANCE),]
buildings.double.new <- buildings.double[order(buildings.double$DISTANCE),]
View(buildings.double.new)
buildings.double <- buildings.double.new
rm(buildings.double.new)
builds <- buildings[buildings$ID == 33780,]
rm(builds)
buildings[buildings$ID == 33780,]
school2building.new[school2building.new$BUILDING_ID == 33780,]
buildings[buildings$ID == 1030,]
school2building.new[school2building.new$BUILDING_ID == 1030,]
buildings[buildings$ID == 8930,]
buildings[buildings$ID == 8930,][c(11,10)]
buildings[buildings$ID == 16348,][c(11,10)]
buildings[buildings$ID == 26569,][c(11,10)]
buildings[buildings$ID == 9258,][c(11,10)]
buildings[buildings$ID == 9258,]
buildings[buildings$ID == 26569,]$STUDENTS
buildings[buildings$ID == 9258,]$STUDENTS
buildings[buildings$ID == 16348,]$STUDENTS
buildings[buildings$ID == 10994,]$STUDENTS
buildings[buildings$ID == 12664,]$STUDENTS
calc.same.students <- function(buildings.double, buildings) {
calc.same.students <- logical();
for (bIdx in 1:nrow(buildings.double)) {
id <- buildings.double$ID[bIdx];
builds <- buildings[buildings$ID == id,]
s1 <- builds$STUDENTS[1];
s2 <- builds$STUDENTS[2];
calc.same.students <- c(calc.same.students, s1 == s2)
print(paste(bIdx, " ", round((100*bIdx)/nrow(buildings.double), digits = 2), "%", sep = ""));
};
calc.same.students;
}
css <- calc.same.students(buildings.double, buildings)
buildings.double$AMOUNT_OF_STUDENTS <- css
View(buildings.double)
rm(css)
buildings[buildings$ID == 33780,]
buildings[buildings$ID == 33805,]
buildings.double[buildings.double$AMOUNT_OF_STUDENTS==TRUE,]
buildings.double.to.remove <- buildings.double[buildings.double$AMOUNT_OF_STUDENTS==TRUE,]
buildings.double <- buildings.double[buildings.double$AMOUNT_OF_STUDENTS==FALSE,]
save.image()
View(buildings.double)
savehistory()
View(buildings.double.to.remove)
buildings[buildings$ID %in% buildings.double.to.remove$ID]
buildings[buildings$ID %in% buildings.double.to.remove$ID,]
buildings[buildings$ID %in% buildings.double.to.remove$ID,][c(1,2)]
buildings.to.remove <- buildings[!(buildings$OBJECTID %in% list(548, 1298, 1604, 4072, 4781, 20368, 34772)),]
View(buildings.to.remove)
buildings.to.remove <- buildings[(buildings$OBJECTID %in% list(548, 1298, 1604, 4072, 4781, 20368, 34772)),]
buildings.new <- buildings[!(buildings$OBJECTID %in% list(548, 1298, 1604, 4072, 4781, 20368, 34772)),]
buildings[buildings$ID %in% buildings.double.to.remove$ID]
buildings[buildings$ID %in% buildings.double.to.remove$ID,][c(1,2)]
buildings[(buildings$OBJECTID %in% list(547, 1297, 1603, 4071, 4780, 20366, 19995 )),]
school2building.new[school2building$BUILDING_ID == 33805,]
school2building.new[school2building.new$BUILDING_ID == 33805,]
school2building.new[school2building.new$BUILDING_ID == 16763,]
buildings[buildings$ID %in% buildings.double.to.remove$ID,][c(3,2)]
school2building.new[school2building.new$BUILDING_ID == 33805,]
buildings.new[(buildings.new$NEW_ID == 2724),]
school2building.new[school2building.new$BUILDING_ID == 33805,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 33805,]
school2building.new.to.add$NEW_BUILDING_ID <- 547
school2building.new <- school2building.new[school2building.new$BUILDING_ID != 33805,]
View(school2building.new.to.add)
school2building.new <- rbind(school2building.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 16763,]
school2building.new.to.add$NEW_BUILDING_ID <- 1297
View(school2building.new.to.add)
school2building.new <- school2building.new[school2building.new$BUILDING_ID != 16763,]
school2building.new <- rbind(school2building.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 16348,]
school2building.new.to.add$NEW_BUILDING_ID <- 1603
View(school2building.new.to.add)
school2building.new <- school2building.new[school2building.new$BUILDING_ID != 16348,]
school2building.new <- rbind(school2building.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 1030,]
school2building.new.to.add$NEW_BUILDING_ID <- 4071
View(school2building.new.to.add)
school2building.new <- school2building.new[school2building.new$BUILDING_ID != 1030,]
school2building.new <- rbind(school2building.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 26569,]
school2building.new.to.add$NEW_BUILDING_ID <- 4780
View(school2building.new.to.add)
school2building.new <- school2building.new[school2building.new$BUILDING_ID != 26569,]
school2building.new <- rbind(school2building.new, school2building.new.to.add)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 32523,]
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 32494,]
rm(school2building.new.to.add)
View(buildings.double)
View(buildings.double.to.remove)
school2building.new.to.add <- school2building.new[school2building.new$BUILDING_ID == 32523,]
rm(school2building.new.to.add)
buildings <- buildings.new
rm(buildings.new)
rm(buildings.double.to.remove)
buildings.to.remove <- buildings[buildings$DISTRICT_NAME == "Внуково",]
View(buildings.to.remove)
school2building.new[school2building.new$BUILDING_ID %in% buildings.to.remove$ID,]
buildings.new <- buildings[buildings$DISTRICT_NAME != "Внуково",]
buildings <- buildings.new
rm(buildings.to.remove)
rm(buildings.new)
save.image()
buildings.to.add <- read.csv("../csv/buildings_from_arcmap.csv")
View(buildings.to.add)
buildings.to.add <- read.csv("../csv/buildings_from_arcmap.csv")
buildings.to.add$ID <- buildings.to.add$ID_1
View(buildings.to.add)
buildings.to.add$ID_1 <- NULL
View(buildings.to.add)
buildings.to.add$NEW_ID <- buildings.to.add$OBJECTID
View(buildings.to.add)
buildings.to.add$ADDRESS <- buildings.to.add$ADDRESS_1
buildings.to.add$ADDRESS_1 <- NULL
View(buildings.to.add)
buildings.to.add$DISTRICT_NAME <- buildings.to.add$DISTRICT_1
View(buildings.to.add)
buildings.to.add$DISTRICT_1 <- NULL
buildings.to.add$NEAR_SCHOOL_FID <- buildings.to.add$NEAR_FID_1
buildings.to.add$NEAR_FID_1 <- NULL
buildings.to.add$NEAR_SCHOOL_X <- buildings.to.add$NEAR_X_1
buildings.to.add$NEAR_X_1 <- NULL
buildings.to.add$NEAR_SCHOOL_Y <- buildings.to.add$NEAR_Y_1
buildings.to.add$NEAR_Y_1 <- NULL
View(buildings.to.add)
buildings.to.add$NEAR_DIST <- buildings.to.add$NEAR_DIST_1
buildings.to.add$NEAR_DIST_1 <- NULL
View(buildings.to.add)
buildings.to.add <- buildings.to.add[c(1, 10, 11, 12, 3, 13, 2, 4,5, 8, 9, 14, 15, 16, 17,6,7)]
View(buildings.to.add)
save.image()
buildings[buildings$ID %in% list(5080, 5081),]
buildings.to.remove <- buildings[buildings$ID %in% list(5080, 5081),]
View(buildings.to.remove)
buildings <- buildings[!(buildings$ID %in% list(5080, 5081)),]
school2building.new(school2building.new$BUILDING_ID %in% list(34797,34798))
school2building.new(school2building.new$BUILDING_ID %in% list(34797,34798),)
school2building.new[school2building.new$BUILDING_ID %in% list(34797,34798),]
school2building.new[school2building.new$NEW_BUILDING_ID %in% list(34797,34798),]
school2building.new[school2building.new$BUILDING_ID %in% list(5080,5081),]
buildings[buildings$ID == 35062),]
buildings[buildings$ID == 35062,]
View(school2building)
View(buildings.to.add)
buildings <- rbind(buildings, buildings.to.add)
save.image()
rm(buildings.to.add, buildings.to.remove)
save.image()
rm(buildings.from.arcmap)
rm(school2building.add)
save.image()
school2building.old.new <- school2building.new
rm (school2building.new)
save.image()
agg <- aggregate(buildings$OBJECTID, x = list(ID=buildings$ID),lenght)
agg <- aggregate(buildings$OBJECTID, list(ID=buildings$ID),lenght)
agg <- aggregate(buildings$OBJECTID, list(ID=buildings$ID), length)
View(agg)
school2building$NEW_BUILDING_ID <- NULL
View(school2building)
buildings.new <- merge(buildings, agg, by = "OBJECTID")
agg <- aggregate(buildings, list(ID), length)
agg <- aggregate(buildings, by=list(ID), length)
agg <- aggregate(buildings$OBJECTID, list(ID=buildings$ID), length)
buildings.single <- buildings[buildings$ID %in% agg[agg$x == 1,]$ID,]
nrow(buildings) - nrow(buildings.single)
nrow(agg[agg$x == 1,])
buildings.multiple <- buildings[buildings$ID %in% agg[agg$x > 1,]$ID,]
nrow(buildings.multiple) + nrow(buildings.single)
buildings.without.id <- buildings[buildings$ID == NULL, ]
View(buildings.without.id)
buildings.without.id <- buildings[buildings$ID == NA, ]
buildings.without.id <- buildings[is.na(buildings$ID), ]
View(buildings.without.id)
buildings <- buildings[!is.na(buildings$ID), ]
buildings.without.id$ID <- 1:10
buildings.without.id$ID <- NA
max(buildings$ID)
buildings.without.id$ID <- 46641:(46641+10)
buildings.without.id$ID <- 46641:46651
buildings.without.id$ID <- 46641:46650
View(buildings)
school2building[school2building$BUILDING_ID == 5080,]
school2building[school2building$BUILDING_ID == 5081,]
school2building.to.add <-school2building[school2building$BUILDING_ID == 5080,]
View(school2building.to.add)
school2building.to.add$BUILDING_ID <- 46641
View(school2building.to.add)
school2building.to.add[1,]
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
school2building.to.add <- rbind(school2building.to.add, school2building.to.add[1,])
View(school2building.to.add)
school2building.to.add$BUILDING_ID <- buildings.without.id$ID
View(school2building.to.add)
school2building.to.add$OBJECTID <- NA
View(school2building.to.add)
school2building <- rbind(school2building, school2building.to.add)
View(school2building)
school2building[school2building$SCHOOL_ID==10749,]
buildings[buildings$ID==5072,]
buildings[buildings$ID==46641,]
buildings[buildings$ID==46641,]
buildings[buildings$ID==46642,]
buildings.without.id$ID <- 46642:46651
school2building.to.add$BUILDING_ID <- buildings.without.id$ID
school2building1 <- school2building[!is.na(school2building$OBJECTID),]
View(school2building1)
school2building <- school2building1
rm (school2building1)
school2building <- rbind(school2building, school2building.to.add)
View(school2building)
buildings[buildings$ID==46642,]
buildings.without.id[buildings.without.id$ID==46642,]
buildings
buildings[is.na(buildings$ID), ]
buildings.new <- rbind(buildings, buildings.without.id)
buildings <- buildings.new
rm(buildings.new)
rm(school2building.to.add)
rm(buildings.without.id)
save.image()
agg <- aggregate(buildings$OBJECTID, list(ID=buildings$ID), length)
View(agg)
buildings.single <- buildings[buildings$ID %in% agg[agg$x == 1,]$ID,]
buildings.multiple <- buildings[buildings$ID %in% agg[agg$x > 1,]$ID,]
nrow(buildings.multiple) + nrow(buildings.single)
View(buildings.single)
agg1 <- agg[order(x),]
agg1 <- agg[order(-x),]
agg1 <- agg[order(agg$x, decreasing = TRUE),]
View(agg1)
agg<-agg1 <- agg[order(agg$x, decreasing = TRUE),]
agg<-agg1
rm (agg1)
View(agg)
agg.double <- agg[agg$x > 1,]
agg.single <- agg[agg$x == 1,]
rm(agg.single)
rm(agg, buildings.double)
school2building.new <- school2building[school2building$BUILDING_ID %in%, buildings.single$ID]
school2building.new <- school2building[school2building$BUILDING_ID %in%, buildings.single$ID,]
school2building.new <- school2building[school2building$BUILDING_ID %in% buildings.single$ID,]
View(school2building.new)
save.image()
buildings.single[buildings.single$ID == 22985,]$NEW_ID
buildings.single[buildings.single$ID == 22985,]$NEW_ID[1]
school2building.new$NEW_BUILDING_ID <- sapply(school2building.new$BUILDING_ID, {function(x) buildings.single[buildings.single$ID == x,]$NEW_ID[1]})
View(school2building.new)
buildings[buildings$NEW_ID == 2724,]
buildings[buildings$ID == 22985,]
buildings[buildings$NEW_ID == 34803,]
buildings[buildings$ID == 46646,]
save.image()
agg.double
View(agg.double)
school2building.new[school2building.new$BUILDING_ID==15603,]
school2building[school2building$BUILDING_ID==15603,]
school2building.to.add <- school2building[school2building$BUILDING_ID==15603,]
buildings[buildings$ID == 15603,]
buildings[buildings$ID == 15603,]$NEW_ID
View(school2building.to.add)
school2building.to.add <- data.frame(buildings[buildings$ID == 15603,]$NEW_ID)
View(school2building.to.add)
school2building.to.add1 <- data.frame(buildings[buildings$ID == 15603,]$NEW_ID)
school2building.to.add2 <- data.frame(buildings[buildings$ID == 15603,]$NEW_ID)
school2building.to.add1$NEW_BUILDING_ID <- school2building.to.add$buildings.buildings.ID....15603....NEW_ID
school2building.to.add1$NEW_BUILDING_ID <- school2building.to.add1$buildings.buildings.ID....15603....NEW_ID
school2building.to.add2$NEW_BUILDING_ID <- school2building.to.add2$buildings.buildings.ID....15603....NEW_ID
school2building.to.add2$buildings.buildings.ID....15603....NEW_ID <- NULL
school2building.to.add1$buildings.buildings.ID....15603....NEW_ID <- NULL
View(school2building.to.add1)
View(school2building.to.add2)
school2building.to.add2$OBJECTID <- NA
school2building.to.add1$OBJECTID <- NA
school2building.to.add <- school2building[school2building$BUILDING_ID==15603,]
View(school2building.to.add)
school2building.to.add1$SCHOOL_ID <- 10553
school2building.to.add2$SCHOOL_ID <- 10554
school2building.to.add <- rbind(school2building.to.add1, school2building.to.add2)
View(school2building.to.add)
school2building.to.add$BUILDING_ID <- 15603
View(school2building.to.add)
school2building.to.add <- school2building.to.add[c(2,4,3,1)]
View(school2building.to.add)
school2building.new <- rbind(school2building.new, school2building.to.add)
rm(school2building.to.add1)
rm(school2building.to.add2)
agg.double[1,]
save.image()
rm(agg.double[1,])
agg.double <- agg.double[agg.double$ID <= 4,]
