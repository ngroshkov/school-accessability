rm(step)
a <- numeric()
class(a)
rm(a)
complex.size = function(complexes){
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
step2 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()")[[1]]));
step3 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()")[[1]]));
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
cs
cs <- complex.size(complexes)
complex.size = function(complexes){
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)-640) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
step2 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()")[[1]]));
step3 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()")[[1]]));
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
cs
rm(cs)
cs <- complex.size(complexes)
rm(cs)
complex.size = function(complexes){
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
step2 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()")[[1]]));
step3 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()")[[1]]));
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
complex.size = function(complexes){
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
step2 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()")[[1]]));
step3 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()")[[1]]));
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(cIdx, " ", url, " ", round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
cs
url <- "http://coc1239.mskobr.ru/"
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]])
xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()"))
xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")
xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")
a<- xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")
rm (a)
complex.size = function(complexes){
xPathStep1 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()";
xPathStep2 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()";
xPathStep3 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()";
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
nodes1 <- xpathApply(doc = page, path = xPathStep1);
nodes2 <- xpathApply(doc = page, path = xPathStep2);
nodes3 <- xpathApply(doc = page, path = xPathStep3);
if (length(nodes1) > 0) {
step1 <- as.numeric(xmlValue(nodes1[[1]]));
};
if (length(nodes2) > 0) {
step2 <- as.numeric(xmlValue(nodes2[[1]]));
};
if (length(nodes3) > 0) {
step3 <- as.numeric(xmlValue(nodes3[[1]]));
};
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(cIdx, " ", url, " ", round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
rm(step1)
rm(step2)
rm(step3)
complex.size = function(complexes){
xPathStep1 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()";
xPathStep2 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()";
xPathStep3 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()";
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education1/"));
nodes1 <- xpathApply(doc = page, path = xPathStep1);
nodes2 <- xpathApply(doc = page, path = xPathStep2);
nodes3 <- xpathApply(doc = page, path = xPathStep3);
if (length(nodes1) > 0) {
step1 <- as.numeric(xmlValue(nodes1[[1]]));
};
if (length(nodes2) > 0) {
step2 <- as.numeric(xmlValue(nodes2[[1]]));
};
if (length(nodes3) > 0) {
step3 <- as.numeric(xmlValue(nodes3[[1]]));
};
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(cIdx, " ", url, " ", round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
complex.size = function(complexes){
xPathStep1 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()";
xPathStep2 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()";
xPathStep3 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()";
step1v <- numeric();
step2v <- numeric();
step3v <- numeric();
for (cIdx in 1:nrow(complexes)) {
url <- complexes$WEBSITE[cIdx];
step1 <- NA;
step2 <- NA;
step3 <- NA;
if (!is.null(url)) {
page <- htmlParse(paste(url, "info_edu/education/"));
nodes1 <- xpathApply(doc = page, path = xPathStep1);
nodes2 <- xpathApply(doc = page, path = xPathStep2);
nodes3 <- xpathApply(doc = page, path = xPathStep3);
if (length(nodes1) > 0) {
step1 <- as.numeric(xmlValue(nodes1[[1]]));
};
if (length(nodes2) > 0) {
step2 <- as.numeric(xmlValue(nodes2[[1]]));
};
if (length(nodes3) > 0) {
step3 <- as.numeric(xmlValue(nodes3[[1]]));
};
};
step1v <- c(step1v, step1);
step2v <- c(step2v, step2);
step3v <- c(step3v, step3);
print(paste(cIdx, " ", url, " ", round((100*cIdx)/nrow(complexes), digits = 2), "%", sep = ""));
}
complex.size = data.frame(step1v, step2v, step3v);
complex.size;
}
cs <- complex.size(complexes)
complexes <- read.csv(file = "./../temp/complexes.csv")
View(complexes)
cs
cs <- complex.size(complexes)
url <- "http://gym1409s-new.mskobr.ru/";
page <- htmlParse(paste(url, "info_edu/education/"));
step1 <- as.numeric(xmlValue(xpathApply(doc = page, path = "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()")[[1]]));
xPathStep1 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Начальное общее']/following-sibling::td[2]/text()";
xPathStep2 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Основное общее']/following-sibling::td[2]/text()";
xPathStep3 <- "//h3[text()='Сведения о реализации образовательных программ']/following-sibling::table[1]/tbody/tr/td[text()='Среднее общее']/following-sibling::td[2]/text()";
nodes1 <- xpathApply(doc = page, path = xPathStep1);
nodes2 <- xpathApply(doc = page, path = xPathStep2);
nodes3 <- xpathApply(doc = page, path = xPathStep3);
nodes1
nodes2
nodes3
rm (nodes1)
rm (nodes2)
rm (nodes3)
rm (xPathStep1)
rm (xPathStep2)
rm (xPathStep3)
rm (step1)
cs <- complex.size(tail(head(complexes, n = 46), n = 1))
cs
cs <- complex.size(tail(head(complexes, n = 47), n = 1))
;
cs <- complex.size(tail(head(complexes, n = 47), n = 1))
cs <- complex.size(complexes)
rm(cs)
cs20 <- complex.size(tail(head(complexes, n = 20), n = 20))
cs20
cs <- cs20
cs$step1v[10] <- 644
cs
cs$step2v[10] <- 720
cs$step3v[10] <- 155
cs
cs40 <- complex.size(tail(head(complexes, n = 40), n = 20))
cs40
ncs <- rbind(cs, cs40)
ncs
cs <- ncs
rm (ncs)
rm (cs20)
cs40
cs
cs$step1v[30] <- 819
cs$step2v[30] <- 831
cs$step3v[30] <- 142
cs
cs$step1v[34] <- 468
cs$step2v[34] <- 529
cs$step2v[34] <- 130
cs$step2v[34] <- 529
cs$step3v[34] <- 130
cs
complexes <- read.csv(file = "./../temp/complexes.csv")
View(complexes)
cs
rm(cs40)
cs60 <- complex.size(tail(head(complexes, n = 60), n = 20))
cs60
cs <- rbind(cs, cs60)
rm(cs60)
cs80 <- complex.size(tail(head(complexes, n = 80), n = 20))
cs80
cs <- rbind(cs, cs80)
cs100 <- complex.size(tail(head(complexes, n = 100), n = 20))
cs100
complexes <- read.csv(file = "./../temp/complexes.csv")
cs100$step1v[12] <- 1451
cs100$step2v[12] <- 1590
cs100$step3v[12] <- 425
cs100
cs <- rbind(cs, cs100)
rm(cs80)
rm(cs100)
cs120 <- complex.size(tail(head(complexes, n = 120), n = 20))
cs120
cs120$step1v[12] <- 568
cs120$step2v[12] <- 924
cs120$step3v[12] <- 669
cs <- rbind(cs, cs120)
rm(cs120)
cs140 <- complex.size(tail(head(complexes, n = 140), n = 20))
cs140
cs140$step3v[20] <- 980
cs140$step1v[20] <- 980
cs140$step2v[20] <- 980
cs140$step2v[20] <- 1092
cs140$step3v[20] <- 365
cs140
cs <- rbind(cs, cs140)
rm(140)
rm(cs140)
cs160 <- complex.size(tail(head(complexes, n = 160), n = 20))
cs160
cs <- rbind(cs, cs160)
rm(cs160)
complexes <- read.csv(file = "./../temp/complexes.csv")
cs180 <- complex.size(tail(head(complexes, n = 180), n = 20))
cs180 <- complex.size(tail(head(complexes, n = 180), n = 20))
cs180
cs <- rbind(cs, cs180)
rm(cs180)
complexes <- read.csv(file = "./../temp/complexes.csv")
cs200 <- complex.size(tail(head(complexes, n = 200), n = 20))
cs200
cs <- rbind(cs, cs200)
rm(cs200)
complexes <- read.csv(file = "./../temp/complexes.csv")
cs220 <- complex.size(tail(head(complexes, n = 220), n = 20))
cs220
cs220$step1v[14] <- 1346
cs220$step2v[14] <- 1391
cs220$step3v[14] <- 296
cs220
cs <- rbind(cs, cs220)
rm(cs220)
complexes <- read.csv(file = "./../temp/complexes.csv")
cs240 <- complex.size(tail(head(complexes, n = 240), n = 20))
cs240 <- complex.size(tail(head(complexes, n = 240), n = 20))
cs240
cs <- rbind(cs, cs240)
rm(cs240)
cs260 <- complex.size(tail(head(complexes, n = 260), n = 20))
cs260
cs <- rbind(cs, cs260)
rm(cs260)
cs280 <- complex.size(tail(head(complexes, n = 280), n = 20))
cs280
cs <- rbind(cs, cs280)
rm(cs280)
cs300 <- complex.size(tail(head(complexes, n = 300), n = 20))
cs300
cs <- rbind(cs, cs300)
cs320 <- complex.size(tail(head(complexes, n = 320), n = 20))
cs320 <- complex.size(tail(head(complexes, n = 320), n = 20))
cs320
cs320$step1v[6] <- 1371
cs320$step2v[6] <- 1385
cs320$step3v[6] <- 325
cs320
cs <- rbind(cs, cs320)
rm(cs300)
rm(cs320)
cs340 <- complex.size(tail(head(complexes, n = 340), n = 20))
cs340 <- complex.size(tail(head(complexes, n = 340), n = 20))
cs340
cs <- rbind(cs, cs340)
rm(cs340)
cs360 <- complex.size(tail(head(complexes, n = 360), n = 20))
cs360
cs360$step1v[6] <- 1371
cs360$step1v[6] <- 1385
cs360$step1v[6] <- 1371
cs360$step2v[6] <- 1385
cs360$step3v[6] <- 325
cs360
cs <- rbind(cs, cs360)
rm(cs360)
cs380 <- complex.size(tail(head(complexes, n = 380), n = 20))
cs360
cs380
cs380$step1v[9] <- 1656
cs380$step2v[9] <- 1800
cs380$step3v[9] <- 453
cs <- rbind(cs, cs380)
cs$step1v[375] <- 1656
cs$step2v[375] <- 1800
cs$step3v[375] <- 453
cs
rm(cs380)
complexes <- read.csv(file = "./../temp/complexes.csv")
cs400 <- complex.size(tail(head(complexes, n = 400), n = 20))
cs400
cs400$step1v[2] <- 1656
cs400$step2v[2] <- 1800
cs400$step3v[2] <- 453
cs <- rbind(cs, cs400)
rm(cs400)
cs420 <- complex.size(tail(head(complexes, n = 420), n = 20))
cs420
cs <- rbind(cs, cs420)
rm(cs420)
cs440 <- complex.size(tail(head(complexes, n = 440), n = 20))
cs440
cs <- rbind(cs, cs440)
rm(cs440)
cs460 <- complex.size(tail(head(complexes, n = 460), n = 20))
cs460
cs <- rbind(cs, cs460)
rm(cs460)
cs480 <- complex.size(tail(head(complexes, n = 480), n = 20))
cs480
cs <- rbind(cs, cs480)
rm(cs480)
cs500 <- complex.size(tail(head(complexes, n = 500), n = 20))
cs500
cs <- rbind(cs, cs500)
rm(cs500)
cs520 <- complex.size(tail(head(complexes, n = 520), n = 20))
cs520
cs <- rbind(cs, cs520)
rm(cs520)
cs540 <- complex.size(tail(head(complexes, n = 540), n = 20))
cs540
cs <- rbind(cs, cs540)
rm(cs540)
cs560 <- complex.size(tail(head(complexes, n = 560), n = 20))
cs560
cs <- rbind(cs, cs560)
rm(cs560)
cs580 <- complex.size(tail(head(complexes, n = 580), n = 20))
cs580 <- complex.size(tail(head(complexes, n = 580), n = 20))
cs580
cs <- rbind(cs, cs580)
rm(cs580)
cs600 <- complex.size(tail(head(complexes, n = 600), n = 20))
cs600
cs <- rbind(cs, cs600)
rm(cs600)
cs620 <- complex.size(tail(head(complexes, n = 620), n = 20))
cs620
cs <- rbind(cs, cs620)
rm(cs620)
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
complexes <- read.csv(file = "./../temp/complexes.csv")
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
complexes <- read.csv(file = "./../temp/complexes.csv")
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
complexes <- read.csv(file = "./../temp/complexes.csv")
complexes <- read.csv(file = "./../temp/complexes.csv")
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
complexes <- read.csv(file = "./../temp/complexes.csv")
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
complexes <- read.csv(file = "./../temp/complexes.csv")
cs640 <- complex.size(tail(head(complexes, n = 640), n = 20))
cs640
cs640$step1v[8] <- 619
cs640$step2v[8] <- 628
cs640$step3v[8] <- 102
cs640
cs640$step3v[18] <- 639
cs640$step1v[18] <- 639
cs640$step2v[18] <- 638
cs640$step3v[18] <- 178
cs640
cs <- rbind(cs, cs640)
rm(cs640)
cs646 <- complex.size(tail(head(complexes, n = 646), n = 6))
cs646
cs <- rbind(cs, cs646)
rm(cs646)
save.image()
savehistory()
write.csv(cs, file="cs.csv")
merge(complexes, cs)
View(cs)
data.frame(complexes, cs)
new_complexes <- data.frame(complexes, cs)
View(new_complexes)
complexes <- new_complexes
attributes(complexes)
complexes$names
names(complexes)
names(complexes)[10]
names(complexes)[10] <- "STEP1"
names(complexes)[10]
complexes$names
complexes$names
attributes(complexes)
names(complexes)[11] <- "STEP2"
names(complexes)[12] <- "STEP3"
attributes(complexes)
View(complexes)
rm(new_complexes)
save.image()
savehistory()
write.csv(cs, file="cs.csv")
write.csv(complexes, file="cs.csv")
savehistory()
save.image()
